<!DOCTYPE html>
<html lang="{% if page.language == "cz" %}cs{% else %}en{% endif%}">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		{% if page.redirect.to %}
		<link rel="canonical" href="{{ page.redirect.to }}">
		<meta http-equiv="refresh" content="0; url={{ page.redirect.to }}">
		{% endif %}
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- ICON -->
		<link rel="icon" type="image/svg+xml" href="{{ '/assets/favicon.svg' | absolute_url}}" />
		<link rel="icon" type="image/png" href="{{ '/assets/favicon.png' | absolute_url}}" />

		<!-- PAGE TITLE AND DESCRIPTION -->
		{% if page.order == 0 %}
			<title>{{ site.title }}</title>
		{% elsif page.html_title %}
			<title>{{ page.html_title }} â€“ {{ site.title }}</title>
		{% else %}
			<title>{{ page.title }} â€“ {{ site.title }}</title>
		{% endif %}
		{% if page.excerpt %}
		<meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | truncatewords: 30 }}">
		{% else %}
		<meta name="description" content="{{ site.description }}">
		{% endif %}

		<!-- OPEN GRAPH -->
		<meta property="og:title" content="{% if page.title %}{{ page.title }} â€“ {{ site.title }}{% else %}{{ site.title }}{% endif %}">
		<meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncatewords: 30 }}{% else %}{{ site.description }}{% endif %}">
		<meta property="og:type" content="{% if page.date %}article{% else %}website{% endif %}">
		<meta property="og:url" content="{{ page.url | absolute_url }}">
		<meta property="og:site_name" content="{{ site.title }}">
		<meta name="twitter:card" content="summary">

		<!-- FONT PRELOADS -->
		<link rel="preload" href="{{ '/assets/css/fonts/FiraSans-Light.woff2' | absolute_url}}" as="font" type="font/woff2" crossorigin>
		<link rel="preload" href="{{ '/assets/css/fonts/FiraMono-Regular.woff2' | absolute_url}}" as="font" type="font/woff2" crossorigin>

		<!-- CSS STYLESHEETS -->
		<link rel="stylesheet" href="{{ '/assets/css/main.css' | absolute_url}}">
		{% if page.css %}
		{% assign css_names = page.css | split: " " %}
		{% for name in css_names %}
		{% capture url %}/assets/css/{{ name }}.css{% endcapture %}
		<link rel="stylesheet" href="{{ url | absolute_url}}">
		{% endfor %}
		{% endif %}

		<!-- FA -->
		<link rel="stylesheet" href="{{ '/assets/css/fa.min.css' | absolute_url}}">

		<!-- KATEX -->
		<link rel="stylesheet" href="{{ '/assets/css/katex.min.css' | absolute_url}}">

		<!-- CANONICAL -->
		<link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

		{% if site.halloween.enabled %}
		<!-- HALLOWEEN: Hide Halloween toggle when JavaScript is disabled -->
		<noscript><style>.halloween-toggle { display: none; }</style></noscript>
		{% endif %}

		<!-- yoinked from Advent of Code: triple clicking a code snippet selects it in its entirety -->
		<script>window.addEventListener('click', function(e,s,r){if((e.target.nodeName==='PRE'||e.target.nodeName==='CODE')&&e.detail===3){s=window.getSelection();s.removeAllRanges();r=document.createRange();r.selectNodeContents(e.target);s.addRange(r);}});</script>

		{% if site.halloween.enabled %}
		<!-- HALLOWEEN: Halloween theme toggle -->
		<script src="{{ '/assets/js/halloween.js' | absolute_url}}" defer></script>
		{% endif %}

		{% if page.htmx %}
		<meta name="htmx-config" content='{"selfRequestsOnly": false}' />
		<script src="{{ '/assets/js/htmx.min.js' | absolute_url}}" defer></script>
		{% endif %}
	</head>

	<body>
		<a href="#main-content" class="skip-link">Skip to main content</a>
		{% if site.halloween.enabled %}
		<!-- HALLOWEEN: Cursor following ghost -->
		<div id="ghost-cursor" style="display: none; position: fixed; font-size: 60px; z-index: 9999; opacity: 0; transition: opacity 0.1s; left: 0; top: 0;" aria-hidden="true">
			<i class="fa-solid fa-ghost"></i>
			<div id="ghost-text" style="display: none; position: absolute; top: 85px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 12px; color: #fff; text-shadow: 0 0 3px rgba(0,0,0,0.8); font-family: Arial, sans-serif; pointer-events: none;">Got your cursor lmao</div>
		</div>
		{% endif %}
		<header class="header no-invert">
			{% if site.halloween.enabled %}
			<!-- HALLOWEEN: Cobweb decoration -->
			<img src="{{ '/assets/halloween/cobweb.svg' | absolute_url}}" style="display: none; position: absolute; top: 0; left: 0; width: 80px; height: auto; z-index: 1; opacity: 0.7;" alt="Cobweb">

			<h1><a href="/">{{ site.title }}</a></h1>

			<!-- HALLOWEEN: Cobweb decoration (flipped) -->
			<img src="{{ '/assets/halloween/cobweb.svg' | absolute_url}}" style="display: none; position: absolute; bottom: 0; right: 0; width: 40px; height: auto; z-index: 1; opacity: 0.7; transform: scaleX(-1) scaleY(-1);" alt="Cobweb">
			{% else %}
			<h1><a href="/">{{ site.title }}</a></h1>
			{% endif %}
		</header>

		<!-- navigation bar -->
		<nav class="navigation-background" aria-label="Main navigation">
			<div class="navigation">
				<ul>
				{% assign sections_sorted = site.documents | concat: site.pages | sort: 'order' %}
				{% for p in sections_sorted %}
					{% if p.title and p.order %}
						<li>
						<span class="navbar-item">
						{% if p.title == page.title %}
							<span class="current-page-item navbar-text"><a href="{{p.url}}">{% if p.icon %}<i class="{% if p.icon contains 'fa-brands' %}{{p.icon}}{% else %}fa-solid {{p.icon}}{% endif %}" aria-hidden="true"></i> {% endif %}{{p.title}}</a></span>
						{% else %}
							<span class="navbar-text"><a href="{{p.url}}">{% if p.icon %}<i class="{% if p.icon contains 'fa-brands' %}{{p.icon}}{% else %}fa-solid {{p.icon}}{% endif %}" aria-hidden="true"></i> {% endif %}{{p.title}}</a></span>
						{% endif %}
						</span>
						</li>
					{% endif %}
				{% endfor %}
				</ul>
			</div>
		</nav>

		<main id="main-content" class="content-background">

			<div class="content">
				{% if page.redirect.to %}
				<div class='center'>
					<h2>Getting redirected...</h2>
					<a href="{{ page.redirect.to }}">Click here if you are not redirected.</a>
					<div class="spacer"></div>
				</div>
				{% else %}
				{% unless page.no-heading %}
					{% if page.center-title %}
						<h2 class="center {% if layout.post-title %} post-title{% endif %}">{% if page.category_icon %}<img class='icon' src='{{ page.category_icon }}' alt='{{ page.category | default: page.category_noslug }} Icon'/>{% endif %} {{ page.title }}</h2>
					{% else %}

						<h2 class="{% if layout.post-title %} post-title{% endif %}">{% if page.category_icon %}<img class='icon' src='{{ page.category_icon }}' alt='{{ page.category | default: page.category_noslug }} Icon'/>{% endif %} {{ page.title }}</h2>
					{% endif %}
				{% else %}
					<h2 class='no-display'>{{ page.title }}</h2>
				{% endunless %}
				{% endif %}

				{{ content }}
			</div>
		</main>

		<footer>
			<p>Maintained by <span id="author-name">TomÃ¡Å¡ SlÃ¡ma</span>.</p>
			<p class="large no-link-color">
				<a href="https://www.youtube.com/channel/UC_IaBSHmisYbiYlv32EeNkQ" rel="noopener noreferrer" aria-label="YouTube"><i class="fa-brands fa-youtube" aria-hidden="true"></i></a>
				<span class="tiny-vspace"></span>
				<a href="https://bsky.app/profile/tomas.slama.dev" rel="noopener noreferrer" aria-label="Bluesky"><i class="fa-brands fa-bluesky" aria-hidden="true"></i></a>
				<span class="tiny-vspace"></span>
				<a href="https://github.com/xiaoxiae" rel="noopener noreferrer" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
				<span class="tiny-vspace"></span>
				<a href="https://open.spotify.com/playlist/6tzOl4stxMsAClqNaUalBg?si=466aa28329d143fd" rel="noopener noreferrer" aria-label="Spotify playlist"><i class="fa-brands fa-spotify" aria-hidden="true"></i></a>
				<span class="vspace"></span>
				<a href="mailto: tomas@slama.dev" aria-label="Email"><i class="fa-solid fa-at" aria-hidden="true"></i></a>
				<span class="tiny-vspace"></span>
				<a href="/feed.xml" aria-label="RSS feed"><i class="fa-solid fa-rss" aria-hidden="true"></i></a>
			</p>
			<p class="small">
				<a href="https://github.com/xiaoxiae/slama.dev" rel="noopener noreferrer">source code</a>
				<span class="half-visible vspace">Â·</span>
				<a href="/privacy-policy/">privacy policy</a>
				<span class="half-visible vspace">Â·</span>
			<a href="/security/">security</a>
			<span class="half-visible vspace">Â·</span>
    			<span>ðŸ‡¨ðŸ‡¿ ðŸ‡µðŸ‡¸ ðŸ‡ºðŸ‡¦</span>
			{% if site.halloween.enabled %}
			<span class="half-visible vspace">Â·</span>
			<button type="button" class="halloween-toggle-btn" onclick="toggleHalloween();" aria-label="Toggle Halloween theme">ðŸŽƒ<span class="halloween-toggle-indicator"></span></button>
			{% endif %}
			</p>
		</footer>

		<!-- Apply navbar name mapping after DOM is loaded -->
		<script>
			applyNavbarNameMapping();
			applyAuthorNameMapping();
			applyFooterLinkMapping();
			updateGhostCursorVisibility();
			document.addEventListener('DOMContentLoaded', function() {
				applyNavbarNameMapping();
				applyAuthorNameMapping();
				applyFooterLinkMapping();
				updateGhostCursorVisibility();
			});
		</script>
	</body>
</html>
